<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Корпуса — Сергиево-Посадский музей-заповедник</title>
  <meta name="description" content="Корпуса Сергиево-Посадского музея-заповедника">

  <!-- ШРИФТЫ -->
  <link rel="stylesheet" href="/assets/css/fonts.css">

  <!-- Tailwind -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="w-full bg-white text-[#24272A]">

  <!-- ОБЩИЕ МОДУЛИ -->
  <div data-include="/tpl/header.html"></div>
  <div data-include="/tpl/menu.html"></div>
  <div data-include="/tpl/menu-mobile.html"></div>

  <!-- ================= MAIN ================= -->
  <main class="max-w-[1600px] mx-auto px-4 lg:px-[60px]">

    <section class="py-[60px] lg:py-[100px] flex flex-col lg:flex-row gap-[40px] lg:gap-[145px]">

      <!-- LEFT -->
      <div class="flex-1">
        <h1 class="font-['Racama']
                   text-[48px] sm:text-[64px] lg:text-[140px]
                   leading-[0.95]
                   tracking-[-0.02em]
                   mb-[40px] lg:mb-[60px]">
          Корпуса
        </h1>

        <ul id="corpsList" class="text-[20px] sm:text-[22px] lg:text-[28px]">

          <li class="corp-item active" data-img="/assets/img/collection-4.png">
            <a href="/corps/main.html">
              <span class="flex-1">Главный корпус</span>
              <span class="arrow">→</span>
            </a>
          </li>

          <li class="corp-item" data-img="/assets/img/collection-3.png">
            <a href="/corps/riznitsa.html">
              <span class="flex-1">Ризница Троице-Сергиевской Лавры</span>
              <span class="arrow">→</span>
            </a>
          </li>

          <li class="corp-item" data-img="/assets/img/collection-2.png">
            <a href="/corps/konny-dvor.html">
              <span class="flex-1">Музейный комплекс «Конный двор»</span>
              <span class="arrow">→</span>
            </a>
          </li>

          <li class="corp-item" data-img="/assets/img/collection-1.png">
            <a href="/corps/local-history.html">
              <span class="flex-1">Краеведческий корпус</span>
              <span class="arrow">→</span>
            </a>
          </li>

        </ul>
      </div>

      <!-- RIGHT IMAGE (DESKTOP ONLY) -->
      <div class="shrink-0 hidden lg:block">
        <img
          id="corpImage"
          src="/assets/img/collection-4.png"
          alt="Экспонат музея"
          class="corp-preview-img
                 w-[420px] lg:w-[480px]
                 h-auto object-cover"
        >
      </div>

    </section>
  </main>

  <!-- FOOTER -->
  <div data-include="/tpl/footer.html"></div>

  <!-- INCLUDE -->
  <script src="/include.js"></script>

  <!-- ================= MORPH LOGIC ================= -->
  <script>
    const items = document.querySelectorAll('.corp-item');
    const image = document.getElementById('corpImage');

    let isAnimating = false;

    items.forEach(item => {
      item.addEventListener('mouseenter', () => {
        if (!image || isAnimating) return;

        const newSrc = item.dataset.img;
        if (image.src.includes(newSrc)) return;

        isAnimating = true;

        items.forEach(i => i.classList.remove('active'));
        item.classList.add('active');

        image.classList.add('morph-out');

        setTimeout(() => {
          image.src = newSrc;
          image.classList.remove('morph-out');
          image.classList.add('morph-in');

          setTimeout(() => {
            image.classList.remove('morph-in');
            isAnimating = false;
          }, 300);

        }, 250);
      });
    });
  </script>

  <!-- ================= LOCAL STYLES ================= -->
  <style>
    .corp-item {
      padding: 24px 0;
      border-bottom: 1px solid #DCDEE0;
      transition: color .2s, border-color .2s;
    }

    .corp-item a {
      display: flex;
      align-items: center;
      gap: 20px;
      text-decoration: none;
      color: inherit;
    }

    .corp-item.active {
      color: #C92E32;
      border-bottom: 2px solid #C92E32;
    }

    .corp-item .arrow {
      font-size: 20px;
    }

    .corp-item.active .arrow {
      color: #C92E32;
    }

    /* IMAGE SHAPE */
    .corp-preview-img {
      border-radius: 9999px 9999px 0 0;
      transition: transform .3s ease, opacity .3s ease;
    }

    /* MORPH STATES */
    .morph-out {
      opacity: 0;
      transform: scale(0.96) translateY(12px);
    }

    .morph-in {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  </style>

  <!-- ALPINE -->
  <script src="https://unpkg.com/alpinejs" defer></script>

</body>
</html>
